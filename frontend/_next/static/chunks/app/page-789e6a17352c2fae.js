(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1287:function(e,t,n){Promise.resolve().then(n.bind(n,256))},256:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var a=n(7437),o=n(2265),s=n(1396),l=n.n(s),r=n(837),i=n(2455),c=n(9409),d=n(3691),m=n(3302),u=n(1541),h=n(8438),x=n(5432),p=n(5817),g=n(9670),f=n(3966),y=n(6020),b=n(4266),v=n(1628);let j={html:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n</head>\n<body style="margin: 0; padding: 0; font-family: Arial, sans-serif;">\n    <div class="email-container" style="max-width: 600px; margin: 0 auto; background-color: #ffffff;">\n        <header style="background-color: #4f46e5; color: white; padding: 20px; text-align: center;">\n            <h1 style="margin: 0; font-size: 24px;">Your Company</h1>\n        </header>\n        \n        <main style="padding: 30px 20px;">\n            <h2 style="color: #1f2937; margin-bottom: 20px;">Welcome!</h2>\n            <p style="color: #4b5563; line-height: 1.6; margin-bottom: 20px;">\n                This is a sample email template. You can edit the HTML and CSS to create your own design.\n            </p>\n            <div style="text-align: center; margin: 30px 0;">\n                <a href="#" style="background-color: #4f46e5; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; display: inline-block;">\n                    Call to Action\n                </a>\n            </div>\n        </main>\n        \n        <footer style="background-color: #f3f4f6; padding: 20px; text-align: center; color: #6b7280;">\n            <p style="margin: 0;">\xa9 2024 Your Company. All rights reserved.</p>\n        </footer>\n    </div>\n</body>\n</html>',css:"/* Email CSS Styles */\n.email-container {\n    font-family: Arial, sans-serif;\n    line-height: 1.6;\n}\n\n.email-container h1 {\n    font-size: 24px;\n    font-weight: bold;\n    margin: 0;\n}\n\n.email-container h2 {\n    font-size: 20px;\n    font-weight: 600;\n    margin-bottom: 15px;\n}\n\n.email-container p {\n    margin-bottom: 15px;\n}\n\n.email-container a {\n    text-decoration: none;\n    color: #4f46e5;\n}\n\n.email-container a:hover {\n    text-decoration: underline;\n}\n\n/* Responsive design */\n@media (max-width: 600px) {\n    .email-container {\n        width: 100% !important;\n    }\n    \n    .email-container main {\n        padding: 20px 15px !important;\n    }\n}"};function EmailEditor(){let[e,t]=(0,o.useState)(j),[n,s]=(0,o.useState)("html"),[l,w]=(0,o.useState)("desktop"),[N,k]=(0,o.useState)("preview"),[S,E]=(0,o.useState)([{id:"1",role:"assistant",content:"Привет! Я помогу тебе создать email шаблон. Что хочешь изменить?",timestamp:new Date}]),[C,T]=(0,o.useState)(""),[L,D]=(0,o.useState)(!1),[U,I]=(0,o.useState)(!1),[R,O]=(0,o.useState)(!1),[P,A]=(0,o.useState)([]),Z=(0,o.useRef)(null),F=(0,o.useRef)(null),M=(0,o.useRef)(null),B=(0,o.useRef)(null),z=(0,o.useRef)(null),loadUserFiles=async()=>{let e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.id;if(!e||!n){console.log("Пользователь не авторизован, пропускаем загрузку файлов");return}try{let t=await fetch("".concat((0,v.l)(),"/api/upload/"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.files&&A(e.files)}}catch(e){console.error("Ошибка загрузки списка файлов:",e)}},replaceRelativePaths=e=>{let t=localStorage.getItem("token"),n=JSON.parse(localStorage.getItem("user")||"{}"),a=n.id,o=(0,v.l)(),s=t?"?token=".concat(encodeURIComponent(t)):"";return e.replace(/src="(?!https?:\/\/)([^"]*\.(png|jpg|jpeg|gif|svg|webp|ico|woff|woff2|ttf|otf|eot))"/gi,'src="'.concat(o,"/api/assets/").concat(a,"/$1").concat(s,'"'))},updatePreview=()=>{if(Z.current){var t;let n=Z.current,a=n.contentDocument||(null===(t=n.contentWindow)||void 0===t?void 0:t.document);if(a){let t=replaceRelativePaths(e.html);a.open(),a.write('\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <meta charset="utf-8">\n            <meta name="viewport" content="width='.concat("mobile"===l?"375":"device-width",', initial-scale=1.0, user-scalable=no">\n            <style>').concat(e.css,"</style>\n          </head>\n          <body>\n            ").concat(t,"\n          </body>\n          </html>\n        ")),a.close()}}};(0,o.useEffect)(()=>{updatePreview()},[e]),(0,o.useEffect)(()=>{(()=>{let e=localStorage.getItem("token"),t=JSON.parse(localStorage.getItem("user")||"{}");console.log("Проверка авторизации при загрузке EmailEditor:"),console.log("- Токен:",e?"присутствует":"отсутствует"),console.log("- Пользователь:",t),e&&t.id?console.log("Пользователь авторизован:",t.email):console.warn("Пользователь не авторизован!")})()},[]),(0,o.useEffect)(()=>{loadUserFiles()},[]),(0,o.useEffect)(()=>{"preview"===N&&setTimeout(()=>{updatePreview()},100)},[N]);let handleEditorChange=(e,n)=>{void 0!==e&&t(t=>({...t,["html"===n?"html":"css"]:e}))},uploadAssets=()=>{var e;null===(e=M.current)||void 0===e||e.click()},handleAssetsUpload=async e=>{let t=e.target.files;if(t&&0!==t.length){O(!0);try{var n;let e=localStorage.getItem("token");if(!e)throw Error("Необходима авторизация. Пожалуйста, войдите в систему.");let a=Array.from(t).map(async t=>{var n;if(t.size>10485760)throw Error("Файл ".concat(t.name," слишком большой. Максимальный размер: 10MB"));let a=null===(n=t.name.split(".").pop())||void 0===n?void 0:n.toLowerCase(),o=["png","jpg","jpeg","gif","webp","svg","pdf","txt","html","css","js","json","xml","mp4","mp3","wav"];if(!a||!o.includes(a))throw Error("Неподдерживаемый тип файла: ".concat(t.name,". Поддерживаемые типы: ").concat(o.join(", ")));let s=new FormData;s.append("file",t);let l=await fetch("".concat((0,v.l)(),"/api/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s});if(!l.ok){let e="Ошибка загрузки файла ".concat(t.name);401===l.status?e="Необходима авторизация. Пожалуйста, войдите в систему.":403===l.status?e="Доступ запрещен":400===l.status?e="Некорректный запрос":413===l.status?e="Файл слишком большой":500===l.status&&(e="Ошибка сервера при загрузке файла");try{let t=await l.json();e=t.error||e}catch(e){}throw Error(e)}let r=await l.json();return{filename:t.name,uploadedFile:r.uploadedFile,folder:r.folder,files:r.files}}),o=await Promise.all(a);console.log("Успешно загружено ".concat(o.length," файлов:"),o),o.length>0&&A(o[o.length-1].files);let s=o.map(e=>e.filename).join(", ");alert("Успешно загружено ".concat(o.length," файлов:\n").concat(s,"\n\nПапка: ").concat(null===(n=o[0])||void 0===n?void 0:n.folder))}catch(e){console.error("Error uploading assets:",e),alert("Ошибка при загрузке файлов: ".concat(e instanceof Error?e.message:"Неизвестная ошибка"))}finally{O(!1),e.target.value=""}}},sendMessage=async()=>{if(!C.trim())return;let t={id:Date.now().toString(),role:"user",content:C,timestamp:new Date};E(e=>[...e,t]),T(""),D(!0);try{let t=e.html;e.html.includes("<!DOCTYPE html>")?e.css&&!e.html.includes("<style>")&&(t=e.html.replace("</head>","    <style>".concat(e.css,"</style>\n</head>"))):t='<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n    <style>'.concat(e.css,"</style>\n</head>\n<body>\n    ").concat(e.html,"\n</body>\n</html>");let n={message:C,emailHTML:t},a=localStorage.getItem("token");if(!a)throw Error("Необходима авторизация. Пожалуйста, войдите в систему.");let o=await fetch("".concat((0,v.l)(),"/api/sendMessageWithFile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(n)});if(!o.ok){let e="Ошибка при отправке сообщения";400===o.status?e="Неверные параметры запроса":413===o.status?e="Слишком длинное сообщение (лимит 10KB)":500===o.status&&(e="Ошибка сервера при отправке сообщения");try{let t=await o.json();e=t.error||e}catch(e){}throw Error(e)}let s=await o.json();console.log("data",s);let l={id:(Date.now()+1).toString(),role:"assistant",content:"Сообщение с HTML кодом успешно отправлено!\n\nСообщение: ".concat(JSON.stringify(s),"\n\nHTML код обработан и сохранен."),timestamp:new Date};E(e=>[...e,l])}catch(t){console.error("Error sending message:",t);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Ошибка при отправке сообщения: ".concat(t instanceof Error?t.message:"Неизвестная ошибка"),timestamp:new Date};E(t=>[...t,e])}finally{D(!1)}},copyFileUrl=e=>{let t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.id||"default",a=t.token,o=a?"?token=".concat(encodeURIComponent(a)):"",s="".concat((0,v.l)(),"/api/assets/").concat(n,"/").concat(e).concat(o);navigator.clipboard.writeText(s).then(()=>{alert("URL файла скопирован в буфер обмена:\n".concat(s))}).catch(()=>{let e=document.createElement("textarea");e.value=s,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("URL файла скопирован в буфер обмена:\n".concat(s))})};return(0,o.useEffect)(()=>{var e;null===(e=B.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[S]),(0,o.useEffect)(()=>{let loadUploadedFiles=async()=>{try{A([])}catch(e){console.error("Error loading uploaded files:",e)}};loadUploadedFiles()},[]),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 h-[calc(100vh-200px)]",children:[(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>s("html"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("html"===n?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 inline mr-2"}),"HTML"]}),(0,a.jsxs)("button",{onClick:()=>s("css"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("css"===n?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 inline mr-2"}),"CSS"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{try{var e;null===(e=z.current)||void 0===e||e.trigger("keyboard","undo",null)}catch(e){}},className:"p-2 text-muted-foreground hover:text-foreground transition-colors",title:"Отменить",children:(0,a.jsx)(d.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{try{var e;null===(e=z.current)||void 0===e||e.trigger("keyboard","redo",null)}catch(e){}},className:"p-2 text-muted-foreground hover:text-foreground transition-colors",title:"Повторить",children:(0,a.jsx)(m.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{var e;null===(e=F.current)||void 0===e||e.click()},className:"p-2 text-green-600 hover:text-green-700 transition-colors",title:"Import email",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:uploadAssets,disabled:R,className:"p-2 text-blue-600 hover:text-blue-700 transition-colors disabled:opacity-50",title:"Upload images and fonts to server",children:R?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,a.jsx)(h.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{t(j)},className:"p-2 text-muted-foreground hover:text-foreground transition-colors",title:"Reset to default",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{let t='<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Email Template</title>\n    <style>'.concat(e.css,"</style>\n</head>\n<body>\n    ").concat(e.html,"\n</body>\n</html>"),n=new Blob([t],{type:"text/html"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="email-template.html",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},className:"p-2 text-muted-foreground hover:text-foreground transition-colors",title:"Download email",children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("input",{ref:F,type:"file",accept:".html,.htm,.txt",onChange:e=>{var n;let a=null===(n=e.target.files)||void 0===n?void 0:n[0];if(!a)return;console.log("Importing file:",a.name,"Size:",a.size,"Type:",a.type);let o=new FileReader;o.onload=e=>{var n;let a=null===(n=e.target)||void 0===n?void 0:n.result;console.log("File content loaded, length:",a.length),console.log("Content preview:",a.substring(0,200)+"...");let o="",s=a.match(/<body[^>]*>([\s\S]*)<\/body>/i);if(s)console.log("Found body content, length:",(o=s[1].trim()).length);else{let e=a.replace(/<title[^>]*>.*?<\/title>/gi,"").replace(/<meta[^>]*>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").trim();e?console.log("Extracted content after meta tags, length:",(o=e).length):console.log("Loading entire file as HTML, length:",(o=a).length)}let l="",r=a.match(/<style[^>]*>([\s\S]*?)<\/style>/gi);r&&console.log("Extracted CSS, length:",(l=r.map(e=>{let t=e.match(/<style[^>]*>([\s\S]*?)<\/style>/i);return t?t[1].trim():""}).join("\n\n")).length),o&&t(e=>({...e,html:o})),l&&t(e=>({...e,css:l}))},o.readAsText(a),e.target.value=""},className:"hidden"}),(0,a.jsx)("input",{ref:M,type:"file",accept:"image/*,.woff,.woff2,.ttf,.otf,.eot",multiple:!0,onChange:handleAssetsUpload,className:"hidden"}),(0,a.jsx)("div",{className:"h-[calc(100%-60px)]",children:(0,a.jsx)(r.ZP,{height:"100%",language:n,value:"html"===n?e.html:e.css,onChange:e=>handleEditorChange(e,n),onMount:e=>{z.current=e},theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0}})})]}),(0,a.jsxs)("div",{className:"bg-card border rounded-lg p-4 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>k("preview"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("preview"===N?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-2"}),"Preview"]}),(0,a.jsxs)("button",{onClick:()=>k("chat"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("chat"===N?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-2"}),"AI Chat"]}),(0,a.jsxs)("button",{onClick:()=>k("assets"),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat("assets"===N?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-2"}),"Assets (",(null==P?void 0:P.length)||0,")"]})]}),"preview"===N&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>w("desktop"),className:"px-2 py-1 rounded text-xs font-medium transition-colors ".concat("desktop"===l?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:"Desktop"}),(0,a.jsx)("button",{onClick:()=>w("mobile"),className:"px-2 py-1 rounded text-xs font-medium transition-colors ".concat("mobile"===l?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:"Mobile"})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:"preview"===N?(0,a.jsx)("div",{className:"h-full overflow-auto",children:(0,a.jsx)("div",{className:"mx-auto bg-white rounded-lg shadow-sm ".concat("mobile"===l?"max-w-md":"max-w-full"),children:(0,a.jsx)("iframe",{ref:Z,className:"w-full h-[600px] border-0 rounded-lg",title:"Email Preview"})})}):"chat"===N?(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-3",children:[S.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[80%] rounded-lg px-3 py-2 ".concat("user"===e.role?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),children:[(0,a.jsx)("p",{className:"text-sm",children:e.content}),(0,a.jsx)("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]})},e.id)),L&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-secondary text-secondary-foreground rounded-lg px-3 py-2",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-current rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,a.jsx)("div",{ref:B})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("textarea",{value:C,onChange:e=>T(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),sendMessage())},placeholder:"Задай вопрос о email шаблоне...",className:"flex-1 resize-none rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",rows:3}),(0,a.jsx)("button",{onClick:sendMessage,disabled:!C.trim()||L,className:"px-3 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]})]}):(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("button",{onClick:uploadAssets,disabled:R,className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:R?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Загрузка..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Загрузить файлы"})]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Поддерживаются: изображения, шрифты (макс. 10MB)"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:P&&0!==P.length?(0,a.jsx)("div",{className:"space-y-2",children:null==P?void 0:P.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary/10 rounded flex items-center justify-center",children:(0,a.jsx)(b.Z,{className:"w-4 h-4 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e.size/1024).toFixed(1)," KB"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.created).toLocaleDateString()}),(0,a.jsx)("button",{onClick:()=>copyFileUrl(e.name),className:"p-1 text-muted-foreground hover:text-foreground transition-colors",title:"Копировать URL файла",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]},t))}):(0,a.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Нет загруженных файлов"}),(0,a.jsx)("p",{className:"text-sm",children:'Нажмите "Загрузить файлы" чтобы добавить ресурсы'})]})})]})})]})]})}var w=n(1097);function Home(){let[e,t]=(0,o.useState)(null),[n,s]=(0,o.useState)(!0),tokenIsExpired=e=>{let t=JSON.parse(atob(e.split(".")[1]));return!!(t.exp&&Date.now()/1e3>=t.exp)};return(0,o.useEffect)(()=>{let e=localStorage.getItem("token");if(e&&!tokenIsExpired(e)){let e=JSON.parse(localStorage.getItem("user")||"{}");t(e.name)}s(!1)},[]),(0,a.jsx)("main",{className:"min-h-screen bg-background",children:(0,a.jsxs)("div",{className:"container mx-auto p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Email Editor"}),(0,a.jsxs)(l(),{href:"/auth",className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),n?(0,a.jsx)("span",{children:"Загрузка..."}):e?(0,a.jsx)("span",{children:e}):(0,a.jsx)("span",{children:"Войти"})]})]}),(0,a.jsx)(EmailEditor,{})]})})}},1628:function(e,t,n){"use strict";n.d(t,{l:function(){return getBackendUrl}});let getBackendUrl=()=>(console.log("process.env.NEXT_PUBLIC_BACKEND_URL","https://localhost:3001"),"https://localhost:3001")}},function(e){e.O(0,[23,971,472,744],function(){return e(e.s=1287)}),_N_E=e.O()}]);